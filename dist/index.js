module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=24)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("lodash/map")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("lodash/merge")},function(e,t){e.exports=require("webpack")},function(e,t){e.exports=require("lodash/camelCase")},function(e,t){e.exports=require("lodash/cloneDeep")},function(e,t){e.exports=require("lodash/get")},function(e,t){e.exports=require("lodash/reduce")},function(e,t){e.exports=require("lodash/clone")},function(e,t){e.exports=require("lodash/remove")},function(e,t){e.exports=require("lodash/slice")},function(e,t){e.exports=require("lodash/pickBy")},function(e,t){e.exports=require("lodash/keys")},function(e,t){e.exports=require("lodash/fromPairs")},function(e,t){e.exports=require("webpack-node-externals")},function(e,t){e.exports=require("offline-plugin")},function(e,t){e.exports=require("html-webpack-plugin")},function(e,t){e.exports=require("ip")},function(e,t){e.exports=require("rimraf")},function(e,t){e.exports=require("@babel/core")},function(e,t){e.exports=require("lodash/filter")},function(e,t){e.exports=require("webpack-dev-server")},function(e,t){e.exports=require("lodash/compact")},function(e,t,n){e.exports=n(26)},function(e,t){e.exports=require("@fiuzagr/logger")},function(e,t,n){"use strict";n.r(t);var o=n(7),s=n.n(o);var r=n(25).default({debugMode:process.env.BOOT_DEBUG}),a=n(9),i=n.n(a),c=n(8),l=n.n(c),u=n(10),p=n.n(u),d=n(11),f=n.n(d),m=n(12),g=n.n(m),h=(e={})=>new Promise(t=>{r.info("Parsing environment variables...");const n=l()(g()(process.env,(e,t)=>t.indexOf("BOOT_")>=0),(e,t,n)=>({...e,[n.replace("BOOT_","")]:t}),{NODE_ENV:"development"});n.DEBUG=!1==!n.DEBUG,r.debug(n),t({...e,env:n})}),b=n(0),v=n.n(b),x=(e={})=>new Promise(t=>{r.info("Resolving paths...");const n=process.env.BOOT_ROOT_PATH,o=v.a.resolve(process.cwd()),s={boot:{root:n,modules:v.a.join(n,"node_modules")},process:{root:o,modules:v.a.join(o,"node_modules"),src:v.a.join(o,"src")}};r.debug(s),t({...e,paths:s})}),w=n(2),k=n.n(w),P=(e,t="utf8")=>new Promise((n,o)=>{r.info(`Reading file "${e}"...`),k.a.readFile(e,t,(e,t)=>{e?o(e):n(t)})}),j=(e={})=>{r.info("Getting packages json...");const t=e.paths.boot.root,n=v.a.join(t,"package.json"),o=e.paths.process.root,s=v.a.join(o,"package.json");return P(n).then(t=>P(s).then(n=>{const o={boot:JSON.parse(t),process:JSON.parse(n)};return r.debug(o),{...e,packagesJson:o}}))},y=n(3),O=n.n(y),S=n(4),q=n.n(S),T=n(1),$=n.n(T),_=n(13),B=n.n(_),D=n(14),E=n.n(D),R=n(15),U=n.n(R),C=n(5),F=n.n(C),G=n(16),M=n.n(G),N=n(17),A=n.n(N),L=n(18),J=n.n(L),H=n(6),I=n.n(H),V=e=>(t,n="")=>{const o=n?s()(I()(t),n):I()(t);return"function"==typeof o?o(I()(e)):o},W={webpack:{common:({paths:e,args:t,env:n,packagesJson:o})=>{const s=e.boot.modules,r=t.w||t.watch||n.WATCH||process.env.WATCH,a=e.process.root,i=e.process.src,c=e.process.modules,l=v.a.join(a,"dist"),u=n.DEBUG,p=u?"development":"production",d=t.publicPath||n.PUBLIC_PATH||"/",f=require("mini-css-extract-plugin"),m=u?"style-loader":f.loader;return{mode:p,devtool:u?"eval-source-map":"source-map",bail:!u,profile:u,cache:!u,stats:u?"normal":"minimal",entry:{index:[v.a.join(i,"index.js")]},output:{publicPath:d,path:l,filename:"[name].js"},resolve:{symlinks:!0,extensions:[".js",".jsx"],modules:[i,c,s],alias:{"@local":i}},resolveLoader:{symlinks:!0,modules:[c,s]},externals:$()(B()(o.process.peerDependencies||{}),e=>new RegExp(`^${e}(/.+)?$`)),module:{rules:[{test:/\.jsx?$/,include:[i],use:[{loader:"babel-loader"}]},{test:/\.css$/,include:[i],use:[m,{loader:"css-loader",options:{importLoaders:1}},"postcss-loader"]},{test:/font.*\.(svg|woff|woff2|ttf|eot)$/,include:[i],use:[{loader:"file-loader",options:{name:"static/font/[name].[hash].[ext]",publicPath:d}}]},{test:/^(?!.*(icon_|favicon)).*\.(png|jpg|gif)$/,include:[i],use:[{loader:"url-loader",options:{limit:1e4}}]},{test:/\.(png|jpg|gif)$/,include:[i],use:[{loader:"file-loader",options:{name:"static/image/[name].[hash].[ext]",publicPath:d}}]}]},plugins:[new q.a.DefinePlugin({...E()($()(n,e=>[`process.env.${e}`,JSON.stringify(n[e])])),"process.env.NODE_ENV":JSON.stringify("development")}),new f({filename:"static/style/[name].[hash].css",chunkFilename:"static/style/[id].[hash].css"})],watch:r,watchOptions:{aggregateTimeout:1e3,poll:1e3,ignored:/node_modules|.git/}}},node:e=>{let t=e.settings.webpack.common;return"function"==typeof t&&(t=t(e)),{...t,target:"node",devtool:void 0,output:{...t.output,libraryTarget:"commonjs2"},externals:t.externals.concat([U()()])}},umd:e=>{const{settings:t,packagesJson:n}=e;let o=t.webpack.common;return"function"==typeof o&&(o=o(e)),{...o,output:{...o.output,library:{root:F()(n.process.name),amd:F()(n.process.name),commonjs:n.process.name},libraryTarget:"umd",globalObject:"this"}}},web:e=>{const{settings:t,paths:n,env:o,packagesJson:s,args:r,banner:a}=e,i=o.DEBUG,c=V(e)(t,"webpack.common"),l=r.publicPath||o.PUBLIC_PATH||"/",u=r.h||r.host||o.HOST||"0.0.0.0",p=r.p||r.port||o.PORT||"3000",d=(J.a.address()||"0.0.0.0")+":"+p,f=n.boot.modules,m=n.process.root,g=n.process.src;let h;return h=i?{path:v.a.join(m,"dist","debug"),filename:"static/script/[name].js",sourceMapFilename:"static/script/[name].map",chunkFilename:"static/script/[name].js"}:{path:v.a.join(m,"dist","release"),filename:"static/script/[name].[hash].js",sourceMapFilename:"static/script/[name].[hash].map",chunkFilename:"static/script/[name].[hash].js"},{...c,target:"web",output:{...c.output,...h},resolve:{...c.resolve,alias:{...c.resolve.alias,"@offline-plugin":v.a.join(f,"offline-plugin")}},module:{...c.module,rules:[...c.module.rules,{type:"javascript/auto",test:/(\.webmanifest|manifest\.json|browserconfig\.xml)$/,include:[g],use:[{loader:"file-loader",options:{name:"[name].[ext]"}},{loader:"app-manifest-loader"}]}]},plugins:[...c.plugins,new A.a({metadata:{publicPath:l,version:o.VERSION||s.process.version,author:s.process.author,banner:a||"Powered by boot",buildDate:(new Date).toString()},filename:"index.html",template:v.a.resolve(g,"index.html"),chunksSortMode:"dependency",favicon:v.a.resolve(g,"assets/images/icons/favicon.ico")}),new M.a({safeToUseOptionalCaches:!0,autoUpdate:!1,caches:{main:[":rest:"],additional:[":externals:"],optional:[]},excludes:["**/.*","**/*.map"],externals:[],rewrites:e=>e.indexOf("index.html")>=0?l:e,ServiceWorker:{cacheName:`${F()(s.process.name)}:${F()("/"===l?"index":l)}`,events:!0,output:"sw.js",navigateFallbackURL:l},AppCache:{events:!0,caches:["main","additional","optional"],FALLBACK:{[l]:l}}})],devServer:{stats:"minimal",public:d,publicPath:l,host:u,port:p,contentBase:h.path,historyApiFallback:{index:l}},optimization:{splitChunks:{chunks:"all"}}}}},babel:{outDir:"dist"}},z=(e={})=>new Promise(t=>{r.info("Merging settings...");const n=v.a.resolve(e.paths.process.root,".boot","settings");let o={};try{o=require(`${n}`).default}catch(e){r.error(e),o={}}const s=O()({},W,o);r.debug(s),t({...e,bootSettings:W,settings:s})}),K=n(19),Q=n.n(K),X=e=>new Promise((t,n)=>{Q()(e,{},o=>{o?n(o):(r.debug("Removed dir:",e),t(e))})});var Y=n(20),Z=e=>new Promise((t,n)=>{k.a.mkdir(e,{},o=>{o?n(o):(r.debug("Created dir:",e),t(e))})}),ee=n(21),te=n.n(ee);var ne={webpack:({parsedSettings:e,env:t,args:n})=>new Promise((o,s)=>{r.info("Building webpack...");const a=e[0];X(a.output.path).then(()=>(({webpackSettings:e,args:t,env:n})=>new Promise((o,s)=>{q()(e,(e,a)=>{e?s(e):a.hasErrors()&&(t.watch||t.w)?s(a.toString({chunks:!1,colors:n.DEBUG})):(r.info(a.toString({chunks:!1,colors:n.DEBUG})),o())})}))({webpackSettings:a,env:t,args:n})).then(o).catch(s)}),babel:({parsedSettings:e,paths:t})=>new Promise((n,o)=>{r.info("Building babel...");const s=e[0],a=v.a.resolve(t.process.root,s.outDir),i=t.process.src;X(a).then(Z).then(()=>(e=>new Promise((t,n)=>{k.a.readdir(e,{},(o,s)=>{o?n(o):(s=te()(s,e=>/\.js$/.test(e)),r.debug("Read dir:",e),r.debug({files:s}),t(s))})}))(i)).then(e=>(e=>Promise.all($()(e,e=>new Promise((t,n)=>{Object(Y.transformFile)(e,null,(o,s)=>{o?n(o):(r.debug("Transformed file:",e),t({data:s.code,file:v.a.basename(e)}))})}))))($()(e,e=>v.a.join(i,e)))).then(e=>(e=>Promise.all($()(e,({file:e,data:t})=>new Promise((n,o)=>{k.a.writeFile(e,t,{encoding:"utf8"},t=>{t?o(t):(r.debug("Saved file:",e),n(e))})}))))($()(e,e=>({...e,file:v.a.join(a,e.file)})))).then(n).catch(o)})},oe=n(22),se=n.n(oe),re={build:ne,serve:{webpack:({parsedSettings:e})=>new Promise(t=>{r.info("Serving...");const n=e[0].devServer,o=n.host,s=n.port;e[0].entry.devServerClient=[`webpack-dev-server/client?http://${o}:${s}/`];const a=new se.a(q()(e[0]),n);a.listen(s,o,()=>{r.info(`Listening on ${o}:${s}`),r.info(`and external on ${n.public}`)}),t(a.close.bind(a))})}},ae=(e={})=>new Promise(t=>{r.info("Merging tasks...");const n=v.a.resolve(e.paths.process.root,".boot","tasks");let o={};try{o=require(`${n}`).default}catch(e){r.error(e),o={}}const s=O()({},re,o);r.debug(s),t({...e,bootTasks:re,tasks:s})}),ie=n(23),ce=n.n(ie),le=(e={})=>new Promise(t=>{r.info("Parsing settings...");const n=e.args.task.split(".").slice(1).join(".");r.debug({subtasks:n});const o=$()(e.args._,e=>ce()([n,"default"!==e&&e.replace(/[:/]/g,".")]).join("."));r.debug({args:o});const s=$()(o,t=>V(e)(e.settings,t));r.debug({parsedSettings:s}),t({...e,parsedSettings:s})}),ue=(e={})=>new Promise(t=>{r.info("Loading .boot context...");const n=v.a.resolve(e.paths.process.root,".boot","context");let o;try{"function"==typeof(o=require(`${n}`).default)&&(o=o(I()(e)))}catch(e){r.error(e),o={}}const s=O()({},e,o);r.debug(s),t(s)});const pe=e=>{r.info("Getting task runner...");const t=e.args.task,n=s()(e.tasks,t);return r.debug(t,n),Promise.resolve({...e,taskRunner:n})};var de={getSettings:V};t.default={runner:(e={})=>((e={})=>new Promise(t=>{r.info("Parsing arguments...");const n=f()(i()(process.argv),2),o=l()(p()(n,e=>0===e.indexOf("-")),(e,t)=>{const n=t.match(/--?([^=]+)=?(.*)/);return e[n[1]]=n[2]||!0,e},{}),s={task:n.shift().replace(/[:/]/g,"."),_:n,...o};r.debug(s),t({...e,args:s})}))(e).then(h).then(x).then(j).then(z).then(ae).then(ue).then(le).then(pe).then(({taskRunner:e,...t})=>e(t)).then(e=>{["SIGINT","SIGTERM"].forEach(t=>{process.on(t,()=>{"function"==typeof e?e(()=>process.exit(0)):process.exit(0)})})}).catch(e=>{r.error(e),process.exit(1)}),utils:de}}]);